{"version":3,"sources":["webpack:///src/app/home/planning/planning.page.html","webpack:///src/app/home/planning/planning-routing.module.ts","webpack:///src/app/home/planning/planning.module.ts","webpack:///src/app/home/planning/planning.page.scss","webpack:///src/app/home/planning/planning.page.ts"],"names":["routes","path","component","loadChildren","then","m","ResultePageModule","PlanningPageRoutingModule","imports","forChild","exports","PlanningPageModule","declarations","PlanningPage","http","formBuilder","placeData","categoryData","no","noSort","distance","point_start","placeToGo","list","cost","sumDistance","$event","removeList","clearData","list$","subscribe","form_planning","group","placeNo","categoryNo","getCategory","length","check","controls","value","fire","push","forEach","item","index","splice","addNewList","post","httpRespon","response","data","formData","FormData","append","success","i","loopPlace","navRouter","Math","ceil","addItem","start","calculateDistance","j","endPath","parseInt","fare","firstPath","sort","a","b","parseFloat","selector","template"],"mappings":"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","file":"planning-planning-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <!-- <ion-icon name=\\\"chevron-back-outline\\\">Black</ion-icon> -->\\n      <ion-back-button\\n        (click)=\\\"closeList()\\\"\\n        [routerLink]=\\\"['/home']\\\"\\n      ></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Planning</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content [fullscreen]=\\\"false\\\">\\n  <div id=\\\"container\\\">\\n    <form\\n      [formGroup]=\\\"form_planning\\\"\\n      style=\\\"padding-top: 15px; font-size: 18px;\\\"\\n    >\\n      <ion-label slot=\\\"start\\\">จุดเริ่มต้น</ion-label>\\n      <ion-item color=\\\"\\\">\\n        <ion-label>ประเภท</ion-label>\\n        <ion-select\\n          type=\\\"md\\\"\\n          formControlName=\\\"categoryNo\\\"\\n          interface=\\\"action-sheet\\\"\\n          (ionChange)=\\\"getPlaceCategory()\\\"\\n        >\\n          <ion-select-option\\n            *ngFor=\\\"let item of categoryData\\\"\\n            [value]=\\\"item.categoryNo\\\"\\n            >{{item.categoryTH}}</ion-select-option\\n          >\\n        </ion-select>\\n      </ion-item>\\n\\n      <ion-item color=\\\"\\\">\\n        <ion-label>สถานที่</ion-label>\\n        <ion-select\\n          type=\\\"md\\\"\\n          formControlName=\\\"point_start\\\"\\n          interface=\\\"action-sheet\\\"\\n        >\\n          <ion-select-option *ngFor=\\\"let item of placeData \\\" [value]=\\\"item\\\"\\n            >{{item.placeTH}}</ion-select-option\\n          >\\n        </ion-select>\\n      </ion-item>\\n\\n      <ion-item\\n        color=\\\"\\\"\\n        *ngIf=\\\"this.form_planning.controls['point_start'].value != ''\\\"\\n      >\\n        <ion-label\\n          >{{'จุดเริ่มต้น'+\\\"\\n          \\\"+this.form_planning.controls['point_start'].value.placeTH}}</ion-label\\n        >\\n      </ion-item>\\n\\n      <div style=\\\"padding-top: 15px;\\\">\\n        <ion-label>โปรดเลือกสถานที่ ที่ต้องการไป</ion-label>\\n      </div>\\n      <ion-item color=\\\"\\\">\\n        <ion-label>ประเภท</ion-label>\\n        <ion-select\\n          type=\\\"md\\\"\\n          formControlName=\\\"categoryNo\\\"\\n          interface=\\\"action-sheet\\\"\\n          (ionChange)=\\\"getPlaceCategory()\\\"\\n        >\\n          <ion-select-option\\n            *ngFor=\\\"let item of categoryData\\\"\\n            [value]=\\\"item.categoryNo\\\"\\n            >{{item.categoryTH}}</ion-select-option\\n          >\\n        </ion-select>\\n      </ion-item>\\n\\n      <ion-item color=\\\"\\\">\\n        <ion-label>สถานที่</ion-label>\\n        <ion-select\\n          type=\\\"md\\\"\\n          formControlName=\\\"placeNo\\\"\\n          interface=\\\"action-sheet\\\"\\n          (ionChange)=\\\"addPlace()\\\"\\n        >\\n          <ion-select-option *ngFor=\\\"let item of placeData\\\" [value]=\\\"item\\\"\\n            >{{item.placeTH}}</ion-select-option\\n          >\\n        </ion-select>\\n      </ion-item>\\n\\n      <ion-item-sliding *ngFor=\\\"let x of no ; let i = index\\\">\\n        <ion-item color=\\\"\\\">\\n          <ion-label>{{(i+1)+\\\". \\\"+x.placeTH}}</ion-label>\\n        </ion-item>\\n        <ion-item-options side=\\\"end\\\">\\n          <ion-item-option color=\\\"danger\\\" (click)=\\\"delPlace(x)\\\"\\n            >Delete</ion-item-option\\n          >\\n        </ion-item-options>\\n      </ion-item-sliding>\\n    </form>\\n  </div>\\n</ion-content>\\n<ion-footer>\\n  <section class=\\\"full-width\\\">\\n    <ion-button\\n      mode=\\\"ios\\\"\\n      expand=\\\"block\\\"\\n      color=\\\"primary\\\"\\n      (click)=\\\"testSort() \\\"\\n      [disabled]=\\\"this.no.length ==0 || this.form_planning.controls['point_start'].value =='' \\\"\\n      >Plan</ion-button\\n    >\\n  </section>\\n</ion-footer>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PlanningPage } from './planning.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PlanningPage\n  },\n  {\n    path: 'resulte',\n    loadChildren: () => import('./resulte/resulte.module').then( m => m.ResultePageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PlanningPageRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\n\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { PlanningPageRoutingModule } from \"./planning-routing.module\";\n\nimport { PlanningPage } from \"./planning.page\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PlanningPageRoutingModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [PlanningPage],\n})\nexport class PlanningPageModule {}\n","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n}\\n\\nion-content ion-toolbar {\\n  --background: translucent;\\n}\\n\\nion-title {\\n  font-size: 20px;\\n  font-weight: 400;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9tZWRpYS9iaWcvRTQ5NjlFNzc5NjlFNDlDNi9wcm9qZWN0L2ZhaWwvdHJhdmVsaW5nX3BsYW5uZXIvc3JjL2FwcC9ob21lL3BsYW5uaW5nL3BsYW5uaW5nLnBhZ2Uuc2NzcyIsInNyYy9hcHAvaG9tZS9wbGFubmluZy9wbGFubmluZy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7RUFDRSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7QUNERjs7QURJQTtFQUNFLHlCQUFBO0FDREY7O0FER0E7RUFDRSxlQUFBO0VBQ0EsZ0JBQUE7QUNBRiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvcGxhbm5pbmcvcGxhbm5pbmcucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiJGJnOiAjZmZmZmZmO1xuXG4jY29udGFpbmVyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xufVxuXG5pb24tY29udGVudCBpb24tdG9vbGJhciB7XG4gIC0tYmFja2dyb3VuZDogdHJhbnNsdWNlbnQ7XG59XG5pb24tdGl0bGUge1xuICBmb250LXNpemU6IDIwcHg7XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG59XG4iLCIjY29udGFpbmVyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xufVxuXG5pb24tY29udGVudCBpb24tdG9vbGJhciB7XG4gIC0tYmFja2dyb3VuZDogdHJhbnNsdWNlbnQ7XG59XG5cbmlvbi10aXRsZSB7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbn0iXX0= */\";","import { HttpService } from \"./../../services/http.service\";\nimport { Component, OnInit, HostListener } from \"@angular/core\";\nimport { FormBuilder, FormControl, FormGroup } from \"@angular/forms\";\nimport Swal from \"sweetalert2\";\n\n@Component({\n  selector: \"app-planning\",\n  templateUrl: \"./planning.page.html\",\n  styleUrls: [\"./planning.page.scss\"],\n})\nexport class PlanningPage implements OnInit {\n  public form_planning: FormGroup;\n  public placeData: Array<any> = null;\n  public categoryData: Array<any> = null;\n  public no: Array<any> = [];\n  public noSort: Array<any> = [];\n  public distance: Array<any> = [];\n  public point_start: Array<any> = [];\n  public placeToGo: Array<any> = [];\n  list = [];\n  public cost: number = 0;\n  public sumDistance: number = 0;\n  constructor(private http: HttpService, private formBuilder: FormBuilder) {}\n\n  @HostListener(\"document:ionBackButton\", [\"$event\"])\n  private async overrideHardwareBackAction($event: any) {\n    this.http.removeList(this.list[0]);\n    this.clearData();\n  }\n\n  async ngOnInit() {\n    this.http.list$.subscribe((list) => (this.list = list));\n    this.form_planning = this.formBuilder.group({\n      placeNo: \"\",\n      categoryNo: \"\",\n      point_start: \"\",\n    });\n    this.getCategory();\n  }\n\n  async addPlace() {\n    if (this.no.length < 8) {\n      let check = 0;\n      if (\n        this.form_planning.controls[\"placeNo\"].value.placeNo ==\n        this.form_planning.controls[\"point_start\"].value.placeNo\n      ) {\n        check = 1;\n        await Swal.fire(\n          \"คุณเลือกสถานที่ซ้ำ !\",\n          \"กรุณาตรวจสอบสถานที่ท่องเที่ยว\",\n          \"warning\"\n        );\n        return;\n      } else {\n        if (this.no == null) {\n          this.no.push(this.form_planning.controls[\"placeNo\"].value);\n          this.placeToGo.push(this.form_planning.controls[\"placeNo\"].value);\n        } else {\n          this.no.forEach(async (item) => {\n            if (item == this.form_planning.controls[\"placeNo\"].value) {\n              check = 1;\n              await Swal.fire(\n                \"คุณเลือกสถานที่ซ้ำ !\",\n                \"กรุณาตรวจสอบสถานที่ท่องเที่ยว\",\n                \"warning\"\n              );\n              return;\n            }\n          });\n          if (check != 1) {\n            this.no.push(this.form_planning.controls[\"placeNo\"].value);\n            this.placeToGo.push(this.form_planning.controls[\"placeNo\"].value);\n          }\n        }\n      }\n    } else {\n      Swal.fire(\n        \"เลือกได้สูงสุด 8 สถานที่ !\",\n        \"กรุณาตรวจสอบสถานที่ท่องเที่ยว\",\n        \"warning\"\n      );\n    }\n  }\n\n  delPlace(value) {\n    this.no.forEach((item, index) => {\n      if (item == value) {\n        this.no.splice(index, 1);\n        return;\n      }\n    });\n  }\n  closeList() {\n    this.http.removeList(this.list[0]);\n  }\n  async addItem(value: any) {\n    if (value != []) {\n      this.http.addNewList(value);\n    }\n  }\n  async getPlace() {\n    let httpRespon: any = await this.http.post(\"getPlace\");\n    //console.log(httpRespon);\n    if (httpRespon.response.data.length > 0) {\n      this.placeData = await httpRespon.response.data;\n    } else {\n      this.placeData = null;\n    }\n  }\n  async getPlaceCategory() {\n    let formData = new FormData();\n    formData.append(\n      \"categoryNo\",\n      this.form_planning.controls[\"categoryNo\"].value\n    );\n    //console.log(this.form_planning.controls[\"categoryNo\"].value);\n    let httpRespon: any = await this.http.post(\"getPlaceCategory\", formData);\n    //console.log(httpRespon);\n    if (httpRespon.response.success) {\n      this.placeData = await httpRespon.response.data;\n    } else {\n      this.placeData = null;\n    }\n  }\n  async getCategory() {\n    let httpRespon: any = await this.http.post(\"getCategory\");\n    //console.log(httpRespon);\n    if (httpRespon.response.success) {\n      this.categoryData = await httpRespon.response.data;\n    } else {\n      this.categoryData = null;\n    }\n  }\n\n  async testSort() {\n    this.point_start = this.form_planning.controls[\"point_start\"].value.placeNo;\n    this.noSort.push(this.form_planning.controls[\"point_start\"].value);\n    for (let i = 0; i < this.no.length; i++) {\n      await this.loopPlace(this.point_start);\n      //console.log(this.noSort);\n    }\n    //console.log(this.cost);\n    this.http.navRouter(\"/home/planning/resulte\");\n    this.sumDistance = await Math.ceil(\n      this.sumDistance / ((this.noSort.length - 1) * 1000)\n    );\n    await this.addItem(this.noSort);\n    await this.addItem(this.cost);\n    this.addItem(this.sumDistance);\n    this.clearData();\n  }\n\n  async loopPlace(start: any) {\n    await this.calculateDistance(start);\n    for (let i = 0; i < this.distance.length; i++) {\n      for (let j = 0; j < this.placeToGo.length; j++) {\n        if (\n          this.distance[i].endPath == this.placeToGo[j].placeNo &&\n          this.distance[i].distance != \"0\"\n        ) {\n          this.cost += parseInt(this.distance[i].fare);\n          this.sumDistance += parseInt(this.distance[i].distance);\n          this.noSort.push(this.placeToGo[j]);\n          this.point_start = await this.placeToGo[j].placeNo;\n          this.placeToGo.splice(j, 1);\n          i = this.distance.length + 1;\n          break;\n        }\n      }\n    }\n  }\n\n  async calculateDistance(firstPath: string) {\n    let formData = new FormData();\n    formData.append(\"firstPath\", firstPath);\n    //formData.append(\"endPath\", endPath);\n    let httpRespon: any = await this.http.post(\"getPathSelectOne\", formData);\n    //console.log(httpRespon);\n    if (httpRespon.response.success) {\n      this.distance = httpRespon.response.data;\n    } else {\n      this.distance = null;\n    }\n\n    this.distance.sort((a: any, b: any) =>\n      parseFloat(a.distance) < parseFloat(b.distance) ? -1 : 0\n    );\n    //console.log(this.distance);\n  }\n  clearData() {\n    this.no = [];\n    this.noSort = [];\n    this.distance = [];\n    this.point_start = [];\n    this.placeToGo = [];\n    this.cost = 0;\n    this.sumDistance = 0;\n  }\n}\n"]}