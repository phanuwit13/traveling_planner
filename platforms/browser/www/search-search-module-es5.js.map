{"version":3,"sources":["webpack:///src/app/home/search/search.page.html","webpack:///src/app/home/search/search-routing.module.ts","webpack:///src/app/home/search/search.module.ts","webpack:///src/app/home/search/search.page.scss","webpack:///src/app/home/search/search.page.ts"],"names":["routes","path","component","SearchPageRoutingModule","imports","forChild","exports","SearchPageModule","declarations","SearchPage","http","modalController","loadingCtrl","place","key","list","$event","dismiss","forEach","item","removeList","create","message","loading","present","getPlace","list$","subscribe","post","httpRespon","response","success","data","formData","FormData","append","value","event","setTimeout","target","complete","setValue","modal","onWillDismiss","dismissed","addNewList","selector","template"],"mappings":"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","file":"search-search-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button [routerLink]=\\\"['/home']\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Search</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content mode=\\\"ios\\\" [fullscreen]=\\\"true\\\">\\n  <ion-refresher mode=\\\"md\\\" slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n\\n  <div id=\\\"container\\\">\\n    <ion-searchbar\\n      [formControl]=\\\"key\\\"\\n      (ionChange)=\\\"getPlaceSearch()\\\"\\n    ></ion-searchbar>\\n    <ion-list>\\n      <ion-list-header>\\n        สถานที่ท่องเที่ยวใน อำเภอเมืองนครราชสีมา\\n      </ion-list-header>\\n\\n      <ion-item\\n        *ngFor=\\\"let item of place ;let i = index\\\"\\n        (click)=\\\"openModal();addItem(item)\\\"\\n      >\\n        <ion-thumbnail slot=\\\"start\\\">\\n          <img\\n            *ngIf=\\\"item.img ==''\\\"\\n            src=\\\"https://i.picsum.photos/id/496/200/200.jpg?hmac=Asy6Q8R1Y6wu0nrV_ymC5JGqktniSVnGqoYvNcHdzBI\\\"\\n          />\\n          <img\\n            *ngIf=\\\"item.img !=''\\\"\\n            src=\\\"http://cpe.rmuti.ac.th/project/traveling_planner/api/img/{{item.img}}\\\"\\n          />\\n        </ion-thumbnail>\\n\\n        <ion-label>\\n          <h2>{{item.placeTH}}</h2>\\n          <h3>{{item.categoryTH}}</h3>\\n          <p>{{item.detail}}</p>\\n        </ion-label>\\n      </ion-item>\\n    </ion-list>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SearchPage } from './search.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SearchPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SearchPageRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\n\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { SearchPageRoutingModule } from \"./search-routing.module\";\n\nimport { SearchPage } from \"./search.page\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SearchPageRoutingModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [SearchPage],\n})\nexport class SearchPageModule {}\n","export default \"ion-title {\\n  font-size: 20px;\\n  font-weight: 400;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9tZWRpYS9iaWcvRTQ5NjlFNzc5NjlFNDlDNi9wcm9qZWN0L2ZhaWwvdHJhdmVsaW5nX3BsYW5uZXIvc3JjL2FwcC9ob21lL3NlYXJjaC9zZWFyY2gucGFnZS5zY3NzIiwic3JjL2FwcC9ob21lL3NlYXJjaC9zZWFyY2gucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZUFBQTtFQUNBLGdCQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9ob21lL3NlYXJjaC9zZWFyY2gucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLXRpdGxlIHtcbiAgZm9udC1zaXplOiAyMHB4O1xuICBmb250LXdlaWdodDogNDAwO1xufVxuIiwiaW9uLXRpdGxlIHtcbiAgZm9udC1zaXplOiAyMHB4O1xuICBmb250LXdlaWdodDogNDAwO1xufSJdfQ== */\";","import { HttpService } from \"./../../services/http.service\";\nimport { Component, OnInit, HostListener } from \"@angular/core\";\nimport { FormControl } from \"@angular/forms\";\nimport { DetailPage } from \"../../modals/detail/detail.page\";\nimport { ModalController, Platform, LoadingController } from \"@ionic/angular\";\n\n@Component({\n  selector: \"app-search\",\n  templateUrl: \"./search.page.html\",\n  styleUrls: [\"./search.page.scss\"],\n})\nexport class SearchPage implements OnInit {\n  public place: Array<any> = null;\n  public key = new FormControl();\n  list = [];\n  loading: any;\n\n  constructor(\n    private http: HttpService,\n    private modalController: ModalController,\n    public loadingCtrl: LoadingController\n  ) {}\n\n  @HostListener(\"document:ionBackButton\", [\"$event\"])\n  private async overrideHardwareBackAction($event: any) {\n    await this.modalController.dismiss();\n    this.list.forEach((item) => {\n      this.http.removeList(item);\n    });\n  }\n\n  async ngOnInit() {\n    this.loading = await this.loadingCtrl.create({\n      message: \"Please wait...\",\n    });\n    await this.loading.present();\n    this.getPlace();\n    this.loading.dismiss();\n    this.http.list$.subscribe((list) => (this.list = list));\n  }\n\n  async getPlace() {\n    let httpRespon: any = await this.http.post(\"getPlace\");\n\n    if (httpRespon.response.success) {\n      this.place = httpRespon.response.data;\n    } else {\n      this.place = httpRespon.response.message;\n    }\n  }\n\n  async getPlaceSearch() {\n    let formData = new FormData();\n\n    formData.append(\"key\", this.key.value);\n    let httpRespon: any = await this.http.post(\"getPlaceSearch\", formData);\n\n    if (httpRespon.response.success) {\n      this.place = await httpRespon.response.data;\n    } else {\n      this.place = null;\n    }\n  }\n  //รีเฟช\n  doRefresh(event) {\n    setTimeout(() => {\n      this.getPlace();\n      event.target.complete();\n    }, 1000);\n    this.place = null;\n    this.key.setValue(\"\");\n  }\n  //เปิดโมเดล\n  async openModal() {\n    const modal = await this.modalController.create({\n      component: DetailPage,\n    });\n    await modal.present();\n    const { data } = await modal.onWillDismiss();\n    if (data.dismissed) {\n      this.list.forEach((item) => {\n        this.http.removeList(item);\n      });\n    }\n  }\n\n  async addItem(item) {\n    this.http.addNewList(item);\n  }\n}\n"]}