{"version":3,"sources":["webpack:///src/app/home/map/map.page.html","webpack:///src/app/home/map/map-routing.module.ts","webpack:///src/app/home/map/map.module.ts","webpack:///src/app/home/map/map.page.scss","webpack:///src/app/home/map/map.page.ts"],"names":["routes","path","component","MapPageRoutingModule","imports","forChild","exports","MapPageModule","declarations","MapPage","platform","http","loadingCtrl","geolocation","list","directionsService","google","maps","DirectionsService","directionsRenderer","DirectionsRenderer","currentLocation","lat","lng","GOOGLE","$event","forEach","item","removeList","list$","subscribe","loadmap","create","message","loading","present","map","Map","document","getElementById","zoom","center","Marker","animation","Animation","DROP","position","marker","myLocation","dismiss","getCurrentPosition","then","resp","coords","latitude","longitude","setPosition","length","setMap","routPath","console","log","setCenter","n","waypts","i","push","location","parseFloat","stopover","route","origin","destination","waypoints","optimizeWaypoints","travelMode","response","status","setDirections","selector","template"],"mappings":"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","file":"map-map-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <!-- <ion-icon name=\\\"chevron-back-outline\\\">Black</ion-icon> -->\\n      <ion-back-button [routerLink]=\\\"['/home']\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Map</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <div id=\\\"map_canvas2\\\"></div>\\n  <div id=\\\"container\\\"></div>\\n</ion-content>\\n\\n<ion-footer>\\n  <section class=\\\"full-width\\\">\\n    <ion-button mode=\\\"ios\\\" expand=\\\"block\\\" color=\\\"primary\\\" (click)=\\\"myLocation()\\\"\\n      >Location</ion-button\\n    >\\n  </section>\\n</ion-footer>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MapPage } from './map.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MapPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MapPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MapPageRoutingModule } from './map-routing.module';\n\nimport { MapPage } from './map.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MapPageRoutingModule\n  ],\n  declarations: [MapPage]\n})\nexport class MapPageModule {}\n","export default \"#map_canvas2 {\\n  height: 100%;\\n}\\n\\nion-title {\\n  font-size: 20px;\\n  font-weight: 400;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9tYXAvQzpcXHByb2plY3RcXGZhaWxcXHRyYXZlbGluZ19wbGFubmVyL3NyY1xcYXBwXFxob21lXFxtYXBcXG1hcC5wYWdlLnNjc3MiLCJzcmMvYXBwL2hvbWUvbWFwL21hcC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFBO0FDQ0Y7O0FEQ0E7RUFDRSxlQUFBO0VBQ0EsZ0JBQUE7QUNFRiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvbWFwL21hcC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjbWFwX2NhbnZhczIge1xuICBoZWlnaHQ6IDEwMCU7XG59XG5pb24tdGl0bGUge1xuICBmb250LXNpemU6IDIwcHg7XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG59XG4iLCIjbWFwX2NhbnZhczIge1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbmlvbi10aXRsZSB7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbn0iXX0= */\";","import { HttpService } from \"src/app/services/http.service\";\nimport { Component, OnInit, NgZone, HostListener } from \"@angular/core\";\nimport { Platform, LoadingController } from \"@ionic/angular\";\nimport { Geolocation } from \"@ionic-native/geolocation/ngx\";\n\ndeclare var google;\n@Component({\n  selector: \"app-map\",\n  templateUrl: \"./map.page.html\",\n  styleUrls: [\"./map.page.scss\"],\n})\nexport class MapPage implements OnInit {\n  public map: any;\n  loading: any;\n  marker: any;\n  distance: string;\n  list = [];\n  public directionsService = new google.maps.DirectionsService();\n  public directionsRenderer = new google.maps.DirectionsRenderer();\n  currentLocation = {\n    lat: null,\n    lng: null,\n  };\n\n  GOOGLE = { lat: 37.422476, lng: -122.08425 };\n  constructor(\n    public platform: Platform,\n    private http: HttpService,\n    public loadingCtrl: LoadingController,\n    private geolocation: Geolocation\n  ) {}\n\n  @HostListener(\"document:ionBackButton\", [\"$event\"])\n  private async overrideHardwareBackAction($event: any) {\n    this.list.forEach((item) => {\n      this.http.removeList(item);\n    });\n  }\n\n  async ngOnInit() {\n    await this.http.list$.subscribe((list) => (this.list = list));\n    this.loadmap();\n    //console.log(this.list);\n  }\n\n  async loadmap() {\n    this.loading = await this.loadingCtrl.create({\n      message: \"Please wait...\",\n    });\n    await this.loading.present();\n\n    this.map = new google.maps.Map(document.getElementById(\"map_canvas2\"), {\n      zoom: 16,\n      center: { lat: 14.9736915, lng: 102.0827157 },\n    });\n    this.marker = await new google.maps.Marker({\n      map: this.map,\n      animation: google.maps.Animation.DROP,\n      position: { lat: 14.9736915, lng: 102.0827157 },\n    });\n    this.myLocation();\n    this.loading.dismiss();\n  }\n  async myLocation() {\n    this.loading = await this.loadingCtrl.create({\n      message: \"Please wait...\",\n    });\n    await this.loading.present();\n    this.geolocation.getCurrentPosition().then(async (resp) => {\n      this.currentLocation.lat = resp.coords.latitude;\n      this.currentLocation.lng = resp.coords.longitude;\n      //console.log(this.currentLocation);\n      this.marker.setPosition(this.currentLocation);\n      if (this.list.length != 0) {\n        this.marker.setMap(null);\n        this.routPath(this.currentLocation);\n      }\n      console.log(this.list);\n      \n      this.map.setCenter(this.currentLocation);\n      this.loading.dismiss();\n    });\n  }\n\n  routPath(currentLocation: any) {\n    let n = this.list[0].length;\n    if (this.directionsRenderer != null) {\n      this.directionsRenderer.setMap(null);\n      this.directionsRenderer = null;\n    }\n    this.directionsRenderer = new google.maps.DirectionsRenderer();\n    this.directionsRenderer.setMap(this.map);\n    let waypts = [];\n    for (let i = 0; i < n; i++) {\n      if (i == n - 1) {\n      } else {\n        waypts.push({\n          location: {\n            lat: parseFloat(this.list[0][i].latitude),\n            lng: parseFloat(this.list[0][i].longitude),\n          },\n          stopover: true,\n        });\n      }\n    }\n    //console.log(waypts);\n\n    this.directionsService.route(\n      {\n        origin: currentLocation,\n        destination: {\n          lat: parseFloat(this.list[0][n - 1].latitude),\n          lng: parseFloat(this.list[0][n - 1].longitude),\n        },\n        waypoints: waypts,\n        optimizeWaypoints: false,\n        travelMode: \"DRIVING\",\n      },\n      async (response, status) => {\n        if (status === \"OK\") {\n          this.directionsRenderer.setDirections(response);\n          //console.log(response);\n          this.list.forEach((item) => {\n            this.http.removeList(item);\n          });\n        } else {\n          //console.log(status);\n        }\n      }\n    );\n  }\n}\n"]}